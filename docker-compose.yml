version: '2.1'
services:
  test_env:
    links:
      - postgres
    cap_add:
      - ALL
    privileged: true
    env_file:
      - .env
    build:
      context: test-env/
      args:
        - FUEL_UI_NPM_REQS=https://raw.githubusercontent.com/openstack/fuel-ui/stable/mitaka/package.json
        - FUEL_WEB_PIP_REQS=https://raw.githubusercontent.com/openstack/fuel-web/stable/mitaka/nailgun/test-requirements.txt
    volumes:
      - ./fuel-ui:/fuel-ui
      - ./fuel-web:/fuel-web
      - ./fuel-plugins:/fuel-plugins
      - ./test-env:/test-env
    entrypoint: /test-env/entrypoint.sh
